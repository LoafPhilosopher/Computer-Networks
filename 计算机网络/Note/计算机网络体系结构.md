<!-- [TOC] -->

# 计算机网络的概述

## 网络的网络

- 计算机网络(简称为网络):由若干节点(node),和连接这些节点的链路(link)组成.其中节点可以是计算机、集线器、交换机或路由器等
  ![20230720085216](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720085216.png)
- 互连网:多个网络通过一些路由器相互连接起来,构成了一个覆盖范围更大的计算机网络.

![20230720085423](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720085423.png)
总结:**网络把许多计算机连接在一起,而互联网则把许多网络通过一些路由器连接在一起.与网络相连的计算机常称为主机**

## <font color="red">计算机网络的概念</font>

一般认为,计算机网络是一个将分散的、具有独立功能的计算机系统,通过**通信设备**与线路连接起来,由功能完善的软件实现**资源共享**和**信息传递**的系统.简而言之,计算机网络就是一些互连的、自治的计算机系统的集合.
需要注意的是计算机网络的发展的不同阶段对计算机网络的定义是不同的,但是可以主要分为一下三类:

- 广义观点:只要是能实现远程信息处理的系统或能进一步达到资源共享的系统就是计算机网络
- 资源共享观点:这种观点认为,计算机网络是"以能够**相互共享资源**的方式互连起来的自治**计算机系统**的集合"
- 用户透明性特点:(我感觉就是抽象)用户使用网络就像使用一台单一的超级计算机,无须了解网络的存在、资源的位置信息

## 计算机网络的发展的三个阶段

- 第一阶段：从单个网络 ARPANET 向互连网发展的过程,1969 年 ARPANET 创建.1983 年 TCP/IP 协议成为 ARPANET 上的标准协议,使得所有使用该协议的计算机都可以利用互联网相互通信,此为互联网诞生标志.
- 第二阶段：建成了**三级结构的互联网**.1985 年起围绕 NSFNET 建设计算机网络,分为主干网、地区网和校园网,覆盖全美国主要大学和研究所.
- 第三阶段：**形成了全球范围的多层次 ISP 结构的互联网**,ISP 是互联网服务提供商.
  > 名词:internet 和 Internet:internet 是一个通用名词,它泛指由多个计算机网络互连而成的计算机网络.Internet(互联网,或因特网)则是一个专用名词,它指当前全球最大的、开放的、由众多网络相互连接而成的特定互连网,它采用 TCP/IP 协议族作为通信的规则.
  > ![20230720092050](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720092050.png)
  > 互联网交换点 IXP (Internet eXchange Point)：允许两个网络直接相连并快速交换分组.互联网交换点 IXP 的主要作用就是允许两个网络直接相连并交换分组,而不需要再通过第三个网络来转发分组.

# 计算机网络的组成

## <font color="red">组成方式</font>

从组成部分上看,一个完整的计算机网络主要由硬件、软件、协议三大部分组成,缺一不可.硬件主要由主机(也称端系统)、通信链路(如双绞线、光纤)、交换设备(如路由器、交换机等)和通信处理机(如网卡)等组成.软件主要包括各种实现资源共享的软件和方便用户使用的各种工具软件(如网络操作系统、邮件收发程序、FTP 程序、聊天程序等).协议是计算机网络的核心,协议规定了网络传输数据时所遵循的规范.

## 工作方式

![20230720194152](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720194152.png)

### 边缘部分

边缘部分由**所有连接到因特网上,供用户直接使用的主机**组成.这部分算用户直接使用的.用来进行通信(如传输数据、音频或视频)和资源共享

### 核心部分

核心部分由大量的网络和连接这些网络的路由器组成,它为**边缘部分提供连通性和交换服务**.

### 边缘部分与端系统之间的通信方式

#### C/S 模式(Client/Server)

- 客户是服务请求方,服务器是服务提供方
- 客户与服务器的通信关系建立后,通信可以是双向的,客户和服务器都可发送和接收数据
  ![20230720194623](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720194623.png)

#### P2P 模式(Peer to Peer)

- 两台主机在通信时不区分服务请求方和服务提供方
- 只要都运行了 P2P 软件,就可以进行平等的、对等连接通信
- **对等连接方式从本质上看仍然是使用客户服务器方式,只是对等连接中的每一个主机既是客户又是服务器**
  ![20230720194817](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720194817.png)

## 功能组成

从功能组成上看,计算机网络由通信子网和资源子网组成.通信子网由各种传输介质、通信设备和相应的网络协议组成,它使网络具有数据传输、交换、控制和存储的能力,**实现联网计算机之间的数据通信**.资源子网是实现资源共享功能的设备及其软件的集合,向网络用户提供**共享其他计算机上的硬件资源、软件资源和数据资源**的服务.

# 计算机网络的功能

- 数据通信:用来实现联网计算机之间各种信息的传输,并将分散在不同地理位置的计算机联系起来,进行统一的调度,控制和管理.
- 资源共享:可以是软件共享,数据共享,硬件共享.使得计算机网络中的**资源互通**,分工协作.
- 分布式处理:**当计算机网络中的某个计算机系统负荷过重时,可以将其处理的某个复杂任务分配给网络中的其他计算机系统**,从而利用空闲计算机资源以提高整个系统的利用率
- 提高可靠性:计算机网络中的各台计算机可以通过网络互为替代机.(A 挂了换 B,B 挂了换 A)
- 负载均衡:将工作任务均衡地分配给计算机网络中的各台计算机

# <font color="red">计算机网络的类别</font>

## 分布范围

- 广域网(WAN):作用范围为几十千米到几千千米的区域,使用高速通路,有较大的通信容量.采用交换技术.
- 城域网(MAN):5~50km,使用以太网技术
- 局域网(LAN):几十米到几千米的区域.采用广播技术.
- 个人区域网(PAN):个人区域网(PAN).个人区域网是指在个人工作的地方将消费电子设备(如平板电脑、 智能手机等)用无线技术连接起来的网络,也常称为无线个人区域网(WPAN),覆盖区域的直径约为 10m.

## 传输技术

### 广播式传播

一台计算机利用共享通信信道发送报文时,所有计算机都会收到这个分组.收到该分组的计算将检查目的地址来决定是否接受该分组.

### 点对点传播

每条物理线路连接一对计算机.若没有直接连接的线路,则他们之间的分组就要通过路由器进行转发存储转发,直到目的节点.

## 拓扑结构

网络拓扑结构是指由网中结点(路由器、主机等)与通信线路(网线)之间的几何关系.主要分为总线形,星形,环形,网状结构.

- 总线形网络.用单根传输线把计算机连接起来
- 星形网络.每个终端或计算机都以单独的线路与中央设备相连
- 环形网络.所有计算机接口设备连接成一个环.环中信号是单向传输的.
- 网状网络.一般情况下,每个结点至少有两条路径与其他结点相连,多用在广域网中.
  ![20230720204047](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720204047.png)

## 使用者

- 公用网:指电信公司出资建造的大型网络
- 专用网:指某个部门为满足本单位特殊业务的需要而建造的网络.

## 传输技术

### 电路交换技术

- 两端之间建立了一条专用的物理通路,在通话的过程中,通话的两个用户始终占用端到端的通信资源.
- 步骤:建立连接(占用通信资源)$\to$ 通话(一直占用通信资源) $\to$ 释放连接(归还通信资源)
  ![20230720224450](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230720224450.png)

### 报文交换技术

用户数据加上源地址、目的地址、校验码等辅助信息,然后封装成报文.**整个报文**传送到相邻结点,全部存储后,再转发给下一个结点,重复这一过程直到到达目的结点.每个报文可以单独选择到达目的结点的路径.

### 分组交换技术

**单个分组**(它只是整个报文的一部分)传送到相邻结点,存储后查找转发表,转发到下一个结点.

## 传输介质

分为有线和无线两类,有线分为双绞线网络,同轴电缆等.无线网络分为蓝牙,微波,无线电等.

# <font color="red">计算机网络的性能</font>

- 速率:指连接到计算机网络上的主机在数字信道上传输数据的速率,也称数据传输速率,数据率,比特率.单位是`b/s`或`/bit/s`.`bit`是二进制数字中的一个 1 或者 0.

## 带宽

- 单位时间内计算机网络某信道能传播的最高数据速率

## 吞吐量

- 单位时间内通过某个网络(或信道,接口)的实际数据量

## 时延

时延(Delay).指数据(一个报文或分组)从网络(或链路)的一端传送到另一端所需要的总时间

### 发送时延

- 发送时延发送时延(ransmission delay)是主机或路由器发送数据帧所需要的时间也就是从发送数据帧的第一个比特算起,到该帧的最后一个比特发送完毕所需的时间.因此发送时延也叫作传输时延
  $$
  \text{发送时延}=\frac{数据帧长度(bit)}{发送速率(bit/s)}
  $$

### 传播时延

- 是电磁波在信道中传播一定的距离需要花费的时间
  $$
    \text{传播时延}=\frac{信道长度(m)}{电磁波在信道上的传播速率(m/s)}
  $$

### 处理时延

- 主机或路由器在收到分组时要花费一定的时间进行处理

### 排队时延

- 排队时延分组在经过网络传输时,要经过许多路由器.但分组在进入路由器后要先在输入队列中排队等待处理.在路由器确定了转发接口后,还要在输出队列中排队等待处理.

综上所诉:

$$
\text{总时延} = \text{发送时延} + \text{传播时延} + \text{处理时延} + \text{排队时延}
$$

一般说来,小时延的网络要优于大时延的网络.在某些情况下,一个低速率、小时延的网络很可能要优于一个高速率但大时延的网络.
![20230722201809](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230722201809.png)

## 时延带宽积

- 一个链路中所能容纳的 bit 的上限
  $$
  \text{时延带宽积}=\text{传播时延} \times \text{带宽}
  $$

## 往返时间 RTT

- 双向交互一次所需的时间
- 传播时延\*2

## 利用率

- 这个信道有多长时间是有数据通过的
  $$
  \text{信道利用率}=\frac{\text{有数据通过的时间}}{\text{(有+无)数据通过时间}}
  $$

# 计算机网络体系结构

## 计算机网络分层结构

两台计算机之间数据的传输是相当复杂的,因此使用分层思想将这个复杂的问题转化为简单的问题
分层思想基本原则如下:

1. 每层都实现一种相对独立的功能,降低大系统的复杂度.
2. 各层之间界面自然清晰,易于理解,相互交流尽可能少.
3. 各层功能的精确定义独立于具体的实现方法,可以采用最合适的技术来实现.
4. 保持下层对上层的独立性,上层单向使用下层提供的服务.
5. 整个分层结构应能促进标准化工作.

在计算机网络的分层结构中,第 n 层中的活动元素通常称为第几层实体.具体来说,实体指任何可发送或接收信思的硬件或软件进程,通常是一个特定的软件模块.不同机器上的同一为对等层,同一层的实体称为对等实体.第 n 层实体实现的服务为第 n+1 层所利用.在这种情况下,第 n 层称为服务提供者,第 n+1 层则服务于用户.
在计算机网络体系结构的各个层次中,每个报文都分为两部分：一是数据部分,即 SDU;二是控制信息部分,即 PCI,它们共同组成 PDU.

- 服务数据单元(SDU)：为完成用户所要求的功能而应传送的数据.第 n 层的服务数据单元记为 n-SDU.
- 协议控制信息(PCI)：控制协议操作的信息.第 n 层的协议控制信息记为 n-PCI.
- 协议数据单元(PDU)：对等层次之间传送的数据单位称为该层的 PDU.第 n 层的协议数据单元记为 n-PDU.在实际的网络中,每层的协议数据单元都有一个通俗的名称,如物理层的 PDU 称为比特,数据链路层的 PDU 称为帧,网络层的 PDU 称为分组,传输层的 PDU 称为报文段.
- 在各层间传输数据时,把从第 n+1 层收到的 PDU 作为第 n 层的 SDU,加上第 n 层的 PCI, 就变成了第 n 层的 PDU,交给第 n-1 层后作为 SDU 发送,接收方接收时做相反的处理,因此可知三者的关系为 n-SDU+n-PCI=n-PDU=(n-1)-SDU
  ![20230723100634](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230723100634.png)
  综上,层次结构的含义包括下列内容:
- 第 n 层的实体不仅要使用第 n-1 层的服务来实现自身定义的功能,还要向第 n+1 层提供本层的服务,该服务是第 n 层及其下面各层提供的服务总和.
- 最低层只提供服务,是整个层次结构的基础；中间各层既是下一层的服务使用者,又是上一层的服务提供者：最高层面向用户提供服务.
- 上一层只能通过相邻层间的接口使用下一层的服务,而不能调用其他层的服务：下一层所提供服务的实现细节对上一层透明.
- 两台主机通信时,对等层在逻辑上有一条直接信道,表现为不经过下层就把信息传送到对方.

## 计算机网络协议,接口,服务的概念

### 协议

协议由语法、语义和同步三部分组成.语法规定了传输数据的格式；语义规定了所要完成的功能,即需要发出何种控制信息、完成何种动作及做出何种应答；同步规定了执行各种操作的条件、时序关系等,即事件实现顺序的详细说明.

### 接口

接口是同一结点内**相邻两层间**交换信息的连接点,是一个系统内部的规定.每层只能为紧邻的层次之间定义接口,不能跨层定义接口.

### 服务

服务是指下层为紧邻的上层提供的功能调用

## ISO/OSI 参考模型和 TCP/IP 模型以及五层参考模型

### <font color="red">ISO/OSI 参考模型</font>

OSI 参考模型有 7 层,自下而上依次为物理层、数据链路层、网络层、 传输层、会话层、表示层、应用层.低三层统称为**通信子网**,它是为了联网而附加的通信设备,完成数据的传输功能：高三层统称为资源子网,它相当于计算机系统,完成数据的处理等功能.

- 物理层
  - 传输单位是比特
  - 功能是在物理媒体上为数据端设备透明地传输原始比特流
  - 物理层主要定义数据终端设备(DTE)和数据通信设备(DCE)的物理与逻辑连接方法,所以物理层协议也称物理层接口标准.由于在通信技术的早期阶段,通信规则称为规程(Procedure), 因此物理层协议也称物理层规程.
  - 物理层主要研究如下内容:
    - 通信链路与通信结点的连接需要一些电路接口, 物理层规定了这些接口的一些参数,如机械形状和尺寸、交换电路的数量和排列等,例如,笔记本电脑上的网线接口,就是物理层规定的内容之一.
    - 物理层也规定了通信链路上传输的信号的意义和电气特征.例如物理层规定信号 A 代表数字 0,那么当结点要传输数字 0 时,就会发出信号 A,当结点接收到信号 A 时,就知道自己接收到的实际上是数字 0.
- 数据链路层
  - 传输单位是帧
  - 任务是将网络层传来的 IP 数据报组装成帧.数据链路层的功能可以概括为成帧、差错控制、流量控制和传输管理等.
- 网络层
  - 传输单位是数据报
  - 网络层关心的是通信子网的运行控制,主要任务是把网络层的协议数据单元(分组)从源端传到目的端,为分组交换网上的不同主机提供通信服务.关键问题是对分组进行路由选择,并实现流量控制、拥塞控制、差错控制和网际互连等功能.
- 传输层
  - 传输单位是报文段(TCP)或用户数据报(UDP)
  - 传输层负责主机中两个进程之间的通信,功能是为端到端连接提供可靠的传输服务,为端到端连接提供流量控制、差错控制、服务质量、数据传输管理等服务.
- 会话层
  - 会话层负责管理主机间的会话进程,包括建立、管理及终止进程间的会话
- 表示层:主要处理在两个通信系统中交换信息的表示方式
- 应用层:应用层是 OSI 参考模型的最高层,是用户与网络的界面.应用层为特定类型的网络应用提供访问 OSI 参考模型环境的手段.因为用户的实际应用多种多样,这就要求应用层采用不同的应用

### <font color="red">TCP/IP 模型</font>

- 网络接口层:功能类似于 OSI 参考模型的物理层和数据链路层
- 网际层(主机$\to$主机):TCP/IP 的核心部分.功能上和网络层非常相似
- 传输层(应用$\to$应用或进程$\to$进程):功能上和 OSI 参考模型的传输层类似.主要是用下面两个协议:
  - 传输控制协议 TCP:面向连接的,数据传输的单位上报文段,能提供可靠的交付
  - 用户数据报协议 UDP:面向无连接的,数据传输单位是用户数据报,不保证提供可靠的交付(尽力而为的).
- 应用层(用户$\to$用户):包含所有高层协议(如 HTTP,DNS,FTP 等).

### 五层参考模型

![20230724034503](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230724034503.png)

- 应用层

  - 数据的交互单元是报文
  - 任务是通过进程之间的交互来完成特定网络应用.应用层协议定义的是应用进程间通信和交互的规则(这里的进程指的是主机中正在运行的程序).

- 运输层

  - 负责向两台主机中进程之间的通信提供通用的数据传输服务
  - 运输层主要使用以下两种协议:
    - 传输控制协议 TCP:面向连接的,数据传输的单位上报文段,能提供可靠的交付,传输单位是报文段
    - 用户数据报协议 UDP:面向无连接的,数据传输单位是用户数据报,不保证提供可靠的交付(尽力而为的),传输单位是用户数据报.

- 网络层
  - 网络层负责为分组交换网上的不同主机提供通信服务.
    - 网络层的具体任务有两个。第一个任务是通过一定的算法，在互联网中的每一个路由器上生成一个用来转发分组的转发表。第二个任务较为简单，就是每一个路由器在接收到一个分组时，依据转发表中指明的路径把分组转发到下一个路由器。这样就可以使源主机运输层所传下来的分组，能够通过合适的路由最终到达目的主机。
  - 运输产生的报文段或用户数据报封装成分组或包进行传送
- 数据链路层
  - 又叫链路层,两台主机之间的数据传输，总是在一段一段的链路上传送的，这就需要使用专门的链路层的协议。在两个相邻节点之间传送数据时，数据链路层将网络层交下来的 IP 数据报组装成帧(framing)，在两个相邻节点间的链路上传送帧(frame)。每一帧包括数据和必要的控制信息(如同步信息、地址信息、差错控制等)。

- 物理层
  - 在物理层上所传数据的单位是比特。发送方发送1(或0)时，接收方应当收到 1(或 0)而不是 0(或 1)。因此物理层要考虑用多大的电压代表"1" 或"0"，以及接收方如何识别出发送方所发送的比特。物理层还要确定连接电缆的插头应当有多少根引脚以及各引脚应如何连接。当然，解释比特代表的意思，不是物理层的任务。请注意，传递信息所利用的一些物理传输媒体，如双绞线、同轴电缆、光缆、无线信道等，并不在物理层协议之内，而是在物理层协议的下面。因此也有人把物理层下面的物理传输媒体当作第 0 层。

### ISO/OSI 参考模型与 TCP/IP 模型的比较

![20230724033425](https://yjc-figure.oss-cn-beijing.aliyuncs.com/20230724033425.png)

#### 相似点

- 都采用分层的体系结构
- 两者都是基于独立的协议栈道概念
- 都可以解决异构网络的互联,实现世界上不同厂家生产的计算机之间的通信.

#### 不同点

- OSI 参考模型准确定义了服务,协议,接口三个概念
- OSI 参考模型产生在协议发明之前,没有偏向于任何特定的协议,通用性良好.但设计者在协议方面没有太多经验,不知道把哪些功能放到哪一层更好.TCP/IP 模型正好相反,首先出现的是协议,模型实际上是对己有协议的描述,因此不会出现协议不能匹配模型的情况,但该模型不适合于任何其他非 TCP/IP 的协议栈.
- 第三,TCP/IP 模型在设计之初就考虑到了多种异构网的互连问题,并将网际协议(IP)作为一个单独的重要层次.OSI 参考模型最初只考虑到用一种标准的公用数据网将各种不同的系统互连.OSI 参考模型认识到 IP 的重要性后,只好在网络层中划分出一个子层来完成类似于 TCP/IP 模型中的 IP 的功能.
- 第四,OSI 参考模型在网络层支持无连接和面向连接的通信,但在传输层仅有面向连接的通信.而 TCP/IP 模型认为可靠性是端到端的问题,因此它在网际层仅有一种无连接的通信模式, 但传输层支持无连接和面向连接两种模式
